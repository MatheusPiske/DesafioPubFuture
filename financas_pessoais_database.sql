/* Criando a database de finanças pessoais */

CREATE DATABASE FINANCAS_PESSOAIS;

USE FINANCAS_PESSOAIS;

CREATE TABLE CONTA(
    IDCONTA INT PRIMARY KEY AUTO_INCREMENT,
    TIPO ENUM('CARTEIRA', 'CONTA CORRENTE', 'POUPANÇA') NOT NULL,
    INSTITUICAO_FINANCEIRA VARCHAR(30),
    SALDO FLOAT(9, 2) NOT NULL
);

CREATE TABLE RECEITA(
    IDRECEITA INT PRIMARY KEY AUTO_INCREMENT,
    TIPO ENUM('SALÁRIO', 'PRESENTE', 'PRÊMIO', 'OUTROS') NOT NULL,
    VALOR_EM_REAIS FLOAT(9, 2) NOT NULL,
    DATA_RECEBIMENTO_ESPERADO DATE NOT NULL,
    DATA_RECEBIMENTO DATE NOT NULL,
    DESCRICAO VARCHAR(100),
    ID_CONTA INT,

    FOREIGN KEY(ID_CONTA)
    REFERENCES CONTA(IDCONTA)
);

CREATE TABLE DESPESA(
    IDDESPESA INT PRIMARY KEY AUTO_INCREMENT,
    TIPO ENUM('ALIMENTAÇÃO', 'EDUCAÇÃO', 'LAZER', 'MORADIA', 'ROUPA', 'SAÚDE', 'TRANSPORTE', 'OUTROS') NOT NULL,
    VALOR_EM_REAIS FLOAT(9, 2) NOT NULL,
    DATA_PAGAMENTO_ESPERADO DATE NOT NULL,
    DATA_PAGAMENTO DATE NOT NULL,
    ID_CONTA INT,

    FOREIGN KEY(ID_CONTA)
    REFERENCES CONTA(IDCONTA)
);

INSERT INTO `conta` VALUES (1,'CONTA CORRENTE','modalmais',7400.00),(6,'CARTEIRA','XP INVESTIMENTOS',5500.20),(8,'CARTEIRA',NULL,7749.80),(10,'POUPANCA','CAIXA',515.00),(12,'CARTEIRA','santander',50.00),(13,'POUPANCA','caixa',4608.00),(14,'CONTA CORRENTE','modalmais',840.20),(15,'POUPANCA','Modalmais',2.00);
INSERT INTO `despesa` VALUES (2,'ALIMENTACAO',220.00,'2022-01-10','2022-01-09',1),(3,'EDUCACAO',1200.00,'2022-02-10','2022-02-10',1),(4,'ALIMENTACAO',60.00,'2022-05-20','2022-04-20',1);
INSERT INTO `receita` VALUES (2,'SALARIO',500.00,'2022-02-03','2022-02-14','ADIANTAMENTO FEITO PELA EMPRESA',1),(3,'PRESENTE',1000.00,'2022-05-03','2022-05-14','Lembrancinha de um parente',1),(4,'PREMIO',50.00,'2022-01-10','2022-01-11','PrEmio fornecido pela empresa.',1),(5,'PRESENTE',42.00,'2022-04-02','2022-03-01','presente inesperado',1);
